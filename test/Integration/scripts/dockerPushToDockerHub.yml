---
- hosts: localhost
  connection: local
  tasks:
    - import_tasks: installDependencies.yml
    
    - import_tasks: dockerHubLogin.yml

    - name: Build, Tag, and Push to Docker Hub
      docker_image:
        build:
          path: .{{ ansible_env.GITHUB_WORKSPACE }}/samples/Web
        name: "{{ansible_env.dockerHubContainerName}}"
        repository: "{{ansible_env.dockerHubUsername}}/{{ansible_env.dockerHubContainerName}}"
        push: yes
        tag: "{{hostvars[inventory_hostname].ansible_distribution_version}}"
        source: local

    - import_tasks: dockerHubLogout.yml
